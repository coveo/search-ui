{"version":3,"sources":["./src/utils/SVGDom.ts","./src/ui/CardActionBar/CardActionBar.ts","./sass/_CardActionBar.scss"],"names":[],"mappings":"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","file":"CardActionBar__119648951d2af823e366.js","sourcesContent":["import { IStringMap } from '../rest/GenericParam';\nimport * as _ from 'underscore';\n\nexport class SVGDom {\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  public static addStyleToSVGInContainer(svgContainer: HTMLElement, styleToAdd: IStringMap<any>) {\n    const svgElement = svgContainer.querySelector('svg');\n    _.each(styleToAdd, (styleValue, styleKey) => {\n      svgElement.style[styleKey] = styleValue;\n    });\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import { Component } from '../Base/Component';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { Initialization } from '../Base/Initialization';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Assert } from '../../misc/Assert';\nimport { $$ } from '../../utils/Dom';\nimport { KeyboardUtils, KEYBOARD } from '../../utils/KeyboardUtils';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\n\nimport 'styling/_CardActionBar';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\n\nexport interface ICardActionBarOptions {\n  hidden?: boolean;\n  openOnMouseOver?: boolean;\n}\n\n/**\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\n * [Result Layouts](https://developers.coveo.com/x/yQUvAg)). It is a simple container for buttons or complementary\n * information.\n *\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\n * `coveo-result-frame` div).\n *\n * See [Result Layouts - Using the CardActionBar Component](https://developers.coveo.com/x/yQUvAg#ResultLayouts-UsingtheCardActionBarComponent)\n */\nexport class CardActionBar extends Component {\n  static ID = 'CardActionBar';\n\n  static doExport = () => {\n    exportGlobally({\n      CardActionBar: CardActionBar\n    });\n  };\n\n  parentResult: HTMLElement;\n  arrowContainer: HTMLElement;\n  removedTabIndexElements: HTMLElement[] = [];\n\n  /**\n   * @componentOptions\n   */\n  static options: ICardActionBarOptions = {\n    /**\n     * Whether to hide the component by default and append a visual indicator to its parent query result.\n     *\n     * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\n     *\n     * Default value is `true`.\n     */\n    hidden: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\n    /**\n     * Whether to open the `CardActionBar`Â when the cursor hovers over it.\n     *\n     * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\n     *\n     * Default value is `true`.\n     */\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\n  };\n\n  /**\n   * Creates a new `CardActionBar` component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The parent [query result]{@link IQueryResult}..\n   */\n  constructor(\n    public element: HTMLElement,\n    public options?: ICardActionBarOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, CardActionBar.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, CardActionBar, options);\n\n    this.parentResult = $$(this.element).closest('CoveoResult');\n    Assert.check(this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\n\n    if (this.options.hidden) {\n      $$(this.parentResult).addClass('coveo-clickable');\n      this.appendArrow();\n      this.bindEvents();\n\n      _.forEach($$(this.element).findAll('*'), (elem: HTMLElement) => {\n        if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\n          this.removedTabIndexElements.push(elem);\n          elem.removeAttribute('tabindex');\n        }\n      });\n    } else {\n      this.element.style.transition = 'none';\n      this.element.style.transform = 'none';\n    }\n  }\n\n  /**\n   * Shows the component.\n   */\n  public show() {\n    $$(this.element).addClass('coveo-opened');\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\n      e.setAttribute('tabindex', '0');\n    });\n  }\n\n  /**\n   * Hides the component.\n   */\n  public hide() {\n    $$(this.element).removeClass('coveo-opened');\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\n      e.removeAttribute('tabindex');\n    });\n  }\n\n  private bindEvents() {\n    $$(this.parentResult).on('click', () => this.show());\n    $$(this.parentResult).on('mouseleave', () => this.hide());\n    if (this.options.openOnMouseOver) {\n      $$(this.arrowContainer).on('mouseenter', () => this.show());\n    }\n  }\n\n  private appendArrow() {\n    this.arrowContainer = $$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\n    this.bind.on(this.arrowContainer, 'keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => this.show()));\n    const arrowUp = $$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons.icons.arrowUp);\n    SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\n    this.arrowContainer.appendChild(arrowUp.el);\n    this.parentResult.appendChild(this.arrowContainer);\n  }\n}\n\nInitialization.registerAutoCreateComponent(CardActionBar);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CardActionBar/CardActionBar.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_CardActionBar.scss\n// module id = 369\n// module chunks = 41 75"],"sourceRoot":""}