{"version":3,"sources":["CardActionBar.min__98539434d87c7c85e52d.js","./src/ui/CardActionBar/CardActionBar.ts"],"names":["webpackJsonpCoveo__temporary","240","module","exports","__webpack_require__","__extends","this","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","p","hasOwnProperty","__","constructor","prototype","create","defineProperty","value","element","options","bindings","result","CardActionBar","ID","removedTabIndexElements","ComponentOptions","initComponentOptions","parentResult","$$","closest","Assert","check","undefined","hidden","addClass","appendArrow","bindEvents","_","forEach","findAll","elem","hasAttribute","getAttribute","push","removeAttribute","style","transition","transform","_this","show","e","setAttribute","hide","removeClass","on","openOnMouseOver","arrowContainer","className","tabindex","el","bind","KeyboardUtils","keypressAction","KEYBOARD","ENTER","arrowUp","SVGIcons","icons","SVGDom","addClassToSVGInContainer","appendChild","doExport","exportGlobally","buildBooleanOption","defaultValue","depend","Component","Initialization","registerAutoCreateComponent","598"],"mappings":"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","file":"CardActionBar.min__98539434d87c7c85e52d.js","sourcesContent":["webpackJsonpCoveo__temporary([74],{\n\n/***/ 240:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Component_1 = __webpack_require__(7);\nvar ComponentOptions_1 = __webpack_require__(8);\nvar Initialization_1 = __webpack_require__(2);\nvar Assert_1 = __webpack_require__(5);\nvar Dom_1 = __webpack_require__(1);\nvar KeyboardUtils_1 = __webpack_require__(25);\nvar _ = __webpack_require__(0);\nvar GlobalExports_1 = __webpack_require__(3);\n__webpack_require__(598);\nvar SVGIcons_1 = __webpack_require__(12);\nvar SVGDom_1 = __webpack_require__(16);\n/**\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\n * [Result Layouts](https://docs.coveo.com/en/360/)). It is a simple container for buttons or complementary\n * information.\n *\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\n * `coveo-result-frame` div).\n *\n * See [Using the CardActionBar Component](https://docs.coveo.com/en/1349/#using-the-cardactionbar-component)\n */\nvar CardActionBar = /** @class */ (function (_super) {\n    __extends(CardActionBar, _super);\n    /**\n     * Creates a new `CardActionBar` component.\n     * @param element The HTMLElement on which to instantiate the component.\n     * @param options The options for the component.\n     * @param bindings The bindings that the component requires to function normally. If not set, these will be\n     * automatically resolved (with a slower execution time).\n     * @param result The parent [query result]{@link IQueryResult}..\n     */\n    function CardActionBar(element, options, bindings, result) {\n        var _this = _super.call(this, element, CardActionBar.ID, bindings) || this;\n        _this.element = element;\n        _this.options = options;\n        _this.result = result;\n        _this.removedTabIndexElements = [];\n        _this.options = ComponentOptions_1.ComponentOptions.initComponentOptions(element, CardActionBar, options);\n        _this.parentResult = Dom_1.$$(_this.element).closest('CoveoResult');\n        Assert_1.Assert.check(_this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\n        if (_this.options.hidden) {\n            Dom_1.$$(_this.parentResult).addClass('coveo-clickable');\n            _this.appendArrow();\n            _this.bindEvents();\n            _.forEach(Dom_1.$$(_this.element).findAll('*'), function (elem) {\n                if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\n                    _this.removedTabIndexElements.push(elem);\n                    elem.removeAttribute('tabindex');\n                }\n            });\n        }\n        else {\n            _this.element.style.transition = 'none';\n            _this.element.style.transform = 'none';\n        }\n        return _this;\n    }\n    /**\n     * Shows the component.\n     */\n    CardActionBar.prototype.show = function () {\n        Dom_1.$$(this.element).addClass('coveo-opened');\n        _.forEach(this.removedTabIndexElements, function (e) {\n            e.setAttribute('tabindex', '0');\n        });\n    };\n    /**\n     * Hides the component.\n     */\n    CardActionBar.prototype.hide = function () {\n        Dom_1.$$(this.element).removeClass('coveo-opened');\n        _.forEach(this.removedTabIndexElements, function (e) {\n            e.removeAttribute('tabindex');\n        });\n    };\n    CardActionBar.prototype.bindEvents = function () {\n        var _this = this;\n        Dom_1.$$(this.parentResult).on('click', function () { return _this.show(); });\n        Dom_1.$$(this.parentResult).on('mouseleave', function () { return _this.hide(); });\n        Dom_1.$$(this.element).on('focusin', function () { return _this.show(); });\n        Dom_1.$$(this.element).on('focusout', function () { return _this.hide(); });\n        if (this.options.openOnMouseOver) {\n            Dom_1.$$(this.arrowContainer).on('mouseenter', function () { return _this.show(); });\n        }\n    };\n    CardActionBar.prototype.appendArrow = function () {\n        var _this = this;\n        this.arrowContainer = Dom_1.$$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\n        this.bind.on(this.arrowContainer, 'keyup', KeyboardUtils_1.KeyboardUtils.keypressAction(KeyboardUtils_1.KEYBOARD.ENTER, function () { return _this.show(); }));\n        var arrowUp = Dom_1.$$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons_1.SVGIcons.icons.arrowUp);\n        SVGDom_1.SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\n        this.arrowContainer.appendChild(arrowUp.el);\n        this.parentResult.appendChild(this.arrowContainer);\n    };\n    CardActionBar.ID = 'CardActionBar';\n    CardActionBar.doExport = function () {\n        GlobalExports_1.exportGlobally({\n            CardActionBar: CardActionBar\n        });\n    };\n    /**\n     * @componentOptions\n     */\n    CardActionBar.options = {\n        /**\n         * Whether to hide the component by default and append a visual indicator to its parent query result.\n         *\n         * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\n         *\n         * Default value is `true`.\n         */\n        hidden: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true }),\n        /**\n         * Whether to open the `CardActionBar` when the cursor hovers over it.\n         *\n         * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\n         *\n         * Default value is `true`.\n         */\n        openOnMouseOver: ComponentOptions_1.ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\n    };\n    return CardActionBar;\n}(Component_1.Component));\nexports.CardActionBar = CardActionBar;\nInitialization_1.Initialization.registerAutoCreateComponent(CardActionBar);\n\n\n/***/ }),\n\n/***/ 598:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// CardActionBar.min__98539434d87c7c85e52d.js","import { Component } from '../Base/Component';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { Initialization } from '../Base/Initialization';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Assert } from '../../misc/Assert';\nimport { $$ } from '../../utils/Dom';\nimport { KeyboardUtils, KEYBOARD } from '../../utils/KeyboardUtils';\nimport * as _ from 'underscore';\nimport { exportGlobally } from '../../GlobalExports';\n\nimport 'styling/_CardActionBar';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { SVGDom } from '../../utils/SVGDom';\n\nexport interface ICardActionBarOptions {\n  hidden?: boolean;\n  openOnMouseOver?: boolean;\n}\n\n/**\n * The `CardActionBar` component displays an action bar at the bottom of a card result (see\n * [Result Layouts](https://docs.coveo.com/en/360/)). It is a simple container for buttons or complementary\n * information.\n *\n * You should place this component at the bottom of a card result template (i.e., as the last child of the surrounding\n * `coveo-result-frame` div).\n *\n * See [Using the CardActionBar Component](https://docs.coveo.com/en/1349/#using-the-cardactionbar-component)\n */\nexport class CardActionBar extends Component {\n  static ID = 'CardActionBar';\n\n  static doExport = () => {\n    exportGlobally({\n      CardActionBar: CardActionBar\n    });\n  };\n\n  parentResult: HTMLElement;\n  arrowContainer: HTMLElement;\n  removedTabIndexElements: HTMLElement[] = [];\n\n  /**\n   * @componentOptions\n   */\n  static options: ICardActionBarOptions = {\n    /**\n     * Whether to hide the component by default and append a visual indicator to its parent query result.\n     *\n     * If this option is set to `true`, the component will show itself when the user clicks its parent query result.\n     *\n     * Default value is `true`.\n     */\n    hidden: ComponentOptions.buildBooleanOption({ defaultValue: true }),\n\n    /**\n     * Whether to open the `CardActionBar` when the cursor hovers over it.\n     *\n     * This option is only meaningful when [`hidden`]{@link CardActionBar.options.hidden} is set to `true`.\n     *\n     * Default value is `true`.\n     */\n    openOnMouseOver: ComponentOptions.buildBooleanOption({ defaultValue: true, depend: 'hidden' })\n  };\n\n  /**\n   * Creates a new `CardActionBar` component.\n   * @param element The HTMLElement on which to instantiate the component.\n   * @param options The options for the component.\n   * @param bindings The bindings that the component requires to function normally. If not set, these will be\n   * automatically resolved (with a slower execution time).\n   * @param result The parent [query result]{@link IQueryResult}..\n   */\n  constructor(\n    public element: HTMLElement,\n    public options?: ICardActionBarOptions,\n    bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, CardActionBar.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, CardActionBar, options);\n\n    this.parentResult = $$(this.element).closest('CoveoResult');\n    Assert.check(this.parentResult !== undefined, 'ActionBar needs to be a child of a Result');\n\n    if (this.options.hidden) {\n      $$(this.parentResult).addClass('coveo-clickable');\n      this.appendArrow();\n      this.bindEvents();\n\n      _.forEach($$(this.element).findAll('*'), (elem: HTMLElement) => {\n        if (elem.hasAttribute('tabindex') && elem.getAttribute('tabindex') == '0') {\n          this.removedTabIndexElements.push(elem);\n          elem.removeAttribute('tabindex');\n        }\n      });\n    } else {\n      this.element.style.transition = 'none';\n      this.element.style.transform = 'none';\n    }\n  }\n\n  /**\n   * Shows the component.\n   */\n  public show() {\n    $$(this.element).addClass('coveo-opened');\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\n      e.setAttribute('tabindex', '0');\n    });\n  }\n\n  /**\n   * Hides the component.\n   */\n  public hide() {\n    $$(this.element).removeClass('coveo-opened');\n    _.forEach(this.removedTabIndexElements, (e: Element) => {\n      e.removeAttribute('tabindex');\n    });\n  }\n\n  private bindEvents() {\n    $$(this.parentResult).on('click', () => this.show());\n    $$(this.parentResult).on('mouseleave', () => this.hide());\n    $$(this.element).on('focusin', () => this.show());\n    $$(this.element).on('focusout', () => this.hide());\n    if (this.options.openOnMouseOver) {\n      $$(this.arrowContainer).on('mouseenter', () => this.show());\n    }\n  }\n\n  private appendArrow() {\n    this.arrowContainer = $$('div', { className: 'coveo-card-action-bar-arrow-container', tabindex: 0 }).el;\n    this.bind.on(\n      this.arrowContainer,\n      'keyup',\n      KeyboardUtils.keypressAction(KEYBOARD.ENTER, () => this.show())\n    );\n    const arrowUp = $$('span', { className: 'coveo-icon coveo-card-action-bar-arrow-icon' }, SVGIcons.icons.arrowUp);\n    SVGDom.addClassToSVGInContainer(arrowUp.el, 'coveo-card-action-bar-arrow-svg');\n    this.arrowContainer.appendChild(arrowUp.el);\n    this.parentResult.appendChild(this.arrowContainer);\n  }\n}\n\nInitialization.registerAutoCreateComponent(CardActionBar);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/CardActionBar/CardActionBar.ts"],"sourceRoot":""}