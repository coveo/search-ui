{"version":3,"sources":["./src/utils/SVGDom.ts","./src/utils/AccessibleButton.ts","./src/ui/SimpleFilter/SimpleFilter.ts","./sass/_SimpleFilter.scss","./sass/_AccessibleButton.scss","./src/ui/Facet/FacetUtils.ts","./src/ui/SimpleFilter/SimpleFilterValues.ts"],"names":[],"mappings":";;;;;;;;AACA,+BAAgC;AAEhC;IAAA;IAsBA,CAAC;IArBe,+BAAwB,GAAtC,UAAuC,YAAyB,EAAE,UAAkB;QAClF,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,KAAG,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,GAAG,UAAY,CAAC,CAAC;IAClF,CAAC;IAEa,oCAA6B,GAA3C,UAA4C,YAAyB,EAAE,aAAqB;QAC1F,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,UAAU,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC,CAAC;IAC3F,CAAC;IAEa,+BAAwB,GAAtC,UAAuC,YAAyB,EAAE,UAA2B;QAC3F,IAAM,UAAU,GAAG,YAAY,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QACrD,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,UAAU,EAAE,QAAQ;YACtC,UAAU,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC;QAC1C,CAAC,CAAC,CAAC;IACL,CAAC;IAEc,eAAQ,GAAvB,UAAwB,UAAsB;QAC5C,IAAM,SAAS,GAAG,UAAU,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QACnD,OAAO,SAAS,CAAC,CAAC,CAAC,SAAS,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC;IAC1C,CAAC;IACH,aAAC;AAAD,CAAC;AAtBY,wBAAM;;;;;;;;;;;ACHnB,uCAAwC;AAExC,8CAAiE;AACjE,mCAAgC;AAChC,yBAAmC;AAEnC;IAeE;QACE,IAAI,CAAC,MAAM,GAAG,IAAI,eAAM,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAEM,oCAAS,GAAhB,UAAiB,KAAsB;QACrC,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;QACxB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,sCAAW,GAAlB,UAAmB,OAA0B;QAC3C,IAAI,OAAO,YAAY,WAAW,EAAE;YAClC,IAAI,CAAC,OAAO,GAAG,QAAE,CAAC,OAAO,CAAC,CAAC;SAC5B;aAAM;YACL,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;SACxB;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,oCAAS,GAAhB,UAAiB,KAAa;QAC5B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,oCAAS,GAAhB,UAAiB,KAAa;QAC5B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,2CAAgB,GAAvB,UAAwB,MAA0B;QAChD,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;QAC1B,IAAI,CAAC,mBAAmB,GAAG,MAAM,CAAC;QAClC,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,0CAAe,GAAtB,UAAuB,WAA+B;QACpD,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,kDAAuB,GAA9B,UAA+B,WAA+B;QAC5D,IAAI,CAAC,mBAAmB,GAAG,WAAW,CAAC;QACvC,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,uDAA4B,GAAnC,UAAoC,MAA0B;QAC5D,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;QAC1B,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC/B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,0CAAe,GAAtB,UAAuB,MAA0B;QAC/C,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC;QAC1B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,+CAAoB,GAA3B,UAA4B,MAA0B;QACpD,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC/B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,sDAA2B,GAAlC,UAAmC,MAA0B;QAC3D,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QACzB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,+CAAoB,GAA3B,UAA4B,MAA0B;QACpD,IAAI,CAAC,gBAAgB,GAAG,MAAM,CAAC;QAC/B,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,yCAAc,GAArB,UAAsB,MAA0B;QAC9C,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QACzB,OAAO,IAAI,CAAC;IACd,CAAC;IAEM,gCAAK,GAAZ;QACE,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;YACjB,IAAI,CAAC,OAAO,GAAG,QAAE,CAAC,KAAK,CAAC,CAAC;SAC1B;QAED,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,8BAA8B,EAAE,CAAC;QACtC,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,IAAI,CAAC,iDAAiD,EAAE,CAAC;QAEzD,OAAO,IAAI,CAAC;IACd,CAAC;IAEO,4EAAiD,GAAzD;QAAA,iBAkBC;QAjBC,IAAM,YAAY,GAAG,iCAAiC,CAAC;QACvD,IAAM,YAAY,GAAG,iCAAiC,CAAC;QACvD,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;QAErD,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,WAAW,EAAE;YAC/B,QAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;YACxC,QAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;QAEH,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,SAAS,EAAE,cAAM,eAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,EAA1C,CAA0C,CAAC,CAAC;QACjF,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE;YAC3B,IAAI,CAAC,QAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,EAAE;gBAC5C,QAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC;aACzC;QACH,CAAC,CAAC,CAAC;QAEH,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,cAAM,eAAE,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,YAAY,CAAC,EAA1C,CAA0C,CAAC,CAAC;IAChF,CAAC;IAEO,4CAAiB,GAAzB;QACE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE;YACtC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;SAC7C;IACH,CAAC;IAEO,6CAAkB,GAA1B;QACE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACf,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,gDAAgD,CAAC,CAAC;YACpE,OAAO;SACR;QACD,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IACtD,CAAC;IAEO,sCAAW,GAAnB;QACE,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/D,CAAC;IAEO,yCAAc,GAAtB;QACE,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;IAC7C,CAAC;IAEO,6CAAkB,GAA1B;QAAA,iBASC;QARC,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC5B,IAAI,CAAC,cAAc,EAAE,CAAC;YACtB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,6BAAa,CAAC,cAAc,CAAC,wBAAQ,CAAC,KAAK,EAAE,UAAC,CAAQ,IAAK,YAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,EAA3B,CAA2B,CAAC,CAAC,CAAC;SAClH;QAED,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SAC3C;IACH,CAAC;IAEO,+CAAoB,GAA5B;QACE,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;SACzC;QAED,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;IACH,CAAC;IAEO,yDAA8B,GAAtC;QACE,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;QACD,IAAI,IAAI,CAAC,WAAW,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;SAC3C;IACH,CAAC;IAEO,wDAA6B,GAArC;QACE,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACzB,IAAI,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACrD;QACD,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;SACzC;IACH,CAAC;IAEO,oCAAS,GAAjB,UAAkB,KAAa,EAAE,MAAgC;QAC/D,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,IAAI,CAAC,UAAU,CAAC,EAAE,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC;SACjD;aAAM;YACL,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;SACpC;IACH,CAAC;IACH,uBAAC;AAAD,CAAC;AApMY,4CAAgB;;;;;;;;;;;;;;;;;;;;;ACN7B,yBAA+B;AAC/B,0CAA+D;AAC/D,iDAA+F;AAC/F,4CAAqI;AACrI,6CAAqD;AACrD,sCAA2C;AAC3C,uCAA0C;AAC1C,iDAAgE;AAChE,mCAA0C;AAC1C,uCAA4C;AAC5C,yCAAgD;AAChD,uDAA4G;AAC5G,yCAA8C;AAE9C,gDAA0E;AAC1E,8CAAwD;AACxD,2CAAiD;AACjD,yCAAmD;AACnD,oDAA0D;AAe1D;;;;;;;GAOG;AACH;IAAkC,gCAAS;IA0FzC;;;;;OAKG;IACH,sBAAmB,OAAoB,EAAS,OAA6B,EAAS,QAA6B;QAAnH,YACE,kBAAM,OAAO,EAAE,YAAY,CAAC,EAAE,EAAE,QAAQ,CAAC,SAoB1C;QArBkB,aAAO,GAAP,OAAO,CAAa;QAAS,aAAO,GAAP,OAAO,CAAsB;QAAS,cAAQ,GAAR,QAAQ,CAAqB;QAf3G,wBAAkB,GAAa,EAAE,CAAC;QAIlC,0BAAoB,GAAa,EAAE,CAAC;QACpC,cAAQ,GAAY,KAAK,CAAC;QAE1B,wBAAkB,GAAG,IAAI,CAAC;QAUhC,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC;QACrF,KAAI,CAAC,OAAO,CAAC,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC;QACxC,KAAI,CAAC,YAAY,EAAE,CAAC;QAEpB,IAAI,mCAAgB,EAAE;aACnB,WAAW,CAAC,KAAI,CAAC,OAAO,CAAC;aACzB,eAAe,CAAC,UAAC,CAAQ,IAAK,YAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAnB,CAAmB,CAAC;aAClD,uBAAuB,CAAC,UAAC,CAAgB,IAAK,YAAI,CAAC,oBAAoB,CAAC,CAAC,CAAC,EAA5B,CAA4B,CAAC;aAC3E,cAAc,CAAC,UAAC,CAAa,IAAK,YAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAlB,CAAkB,CAAC;aACrD,SAAS,CAAC,KAAI,CAAC,OAAO,CAAC,KAAK,CAAC;aAC7B,KAAK,EAAE,CAAC;QAEX,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,kBAAkB,EAAE,UAAC,IAAkC;YAC9F,YAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC;QAAnC,CAAmC,CACpC,CAAC;QACF,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,mCAAgB,CAAC,eAAe,EAAE,cAAM,YAAI,CAAC,qBAAqB,EAAE,EAA5B,CAA4B,CAAC,CAAC;QAC9F,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,aAAa,EAAE,UAAC,IAA6B,IAAK,YAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,EAA9B,CAA8B,CAAC,CAAC;QACtH,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,iBAAiB,EAAE,UAAC,IAAiC,IAAK,YAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,EAAlC,CAAkC,CAAC,CAAC;QAClI,KAAI,CAAC,IAAI,CAAC,aAAa,CAAC,yBAAW,CAAC,YAAY,EAAE,UAAC,IAA4B,IAAK,YAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,EAA7B,CAA6B,CAAC,CAAC;;IACrH,CAAC;IAED;;;OAGG;IACI,wCAAiB,GAAxB;QACE,OAAO,IAAI,CAAC,cAAc,CAAC;IAC7B,CAAC;IAED;;;;OAIG;IACI,sCAAe,GAAtB,UAAuB,KAAa;QAClC,IAAI,GAAG,GAAG,KAAK,CAAC;QAEhB,IAAI,qBAAQ,CAAC,iBAAI,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE,KAAK,CAAC,EAAE;YACpD,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC;YAC5C,OAAO,WAAC,CAAC,GAAG,CAAC,CAAC;SACf;aAAM;YACL,OAAO,uBAAU,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAC;SACjF;IACH,CAAC;IAED;;;OAGG;IACI,0CAAmB,GAA1B;QAAA,iBAEC;QADC,OAAO,gBAAG,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,UAAC,aAAqB,IAAK,YAAI,CAAC,eAAe,CAAC,aAAa,CAAC,EAAnC,CAAmC,CAAC,CAAC;IACvG,CAAC;IAED;;OAEG;IACI,sCAAe,GAAtB;QACE,QAAE,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,QAAQ,CAAC,6CAA6C,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;IACjI,CAAC;IAED;;;;OAIG;IACI,kCAAW,GAAlB,UAAmB,KAAa,EAAE,YAAmB;QAArD,iBAOC;QAPiC,kDAAmB;QACnD,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,eAAiC;YACtD,IAAM,UAAU,GAAG,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC/D,IAAI,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,KAAK,EAAE;gBACzD,eAAe,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;aAC/C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;OAGG;IACI,oCAAa,GAApB,UAAqB,KAAa;QAAlC,iBAOC;QANC,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,eAAiC;YACtD,IAAM,UAAU,GAAG,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC/D,IAAI,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,KAAK,EAAE;gBACzD,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;aAClC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;;OAGG;IACI,kCAAW,GAAlB,UAAmB,KAAa;QAAhC,iBAOC;QANC,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,eAAiC;YACtD,IAAM,UAAU,GAAG,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;YAC/D,IAAI,eAAe,CAAC,KAAK,IAAI,KAAK,IAAI,UAAU,IAAI,KAAK,EAAE;gBACzD,eAAe,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;aACnC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACI,wCAAiB,GAAxB;QAAA,iBAMC;QALC,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,eAAiC;YACtD,IAAI,eAAe,CAAC,QAAQ,CAAC,UAAU,EAAE,EAAE;gBACzC,KAAI,CAAC,aAAa,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;aAC3C;QACH,CAAC,CAAC,CAAC;IACL,CAAC;IAED;;OAEG;IACI,oCAAa,GAApB;QACE,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,6CAA6C,CAAC,CAAC;QACzE,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,6CAA6C,CAAC,CAAC;QAC5E,IAAI,CAAC,qBAAqB,EAAE,CAAC;QAC7B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,kCAAkC,CAAC,EAAE;YAC/D,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;IACH,CAAC;IAED;;OAEG;IACI,qCAAc,GAArB;QACE,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,6CAA6C,CAAC,CAAC;QAC5E,IAAI,CAAC,cAAc,CAAC,WAAW,CAAC,6CAA6C,CAAC,CAAC;QAC/E,IAAI,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,kCAAkC,CAAC,EAAE;YAC9D,IAAI,CAAC,YAAY,EAAE,CAAC;SACrB;QACD,IAAI,IAAI,CAAC,4BAA4B,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;YACnD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;IACH,CAAC;IAEO,wCAAiB,GAAzB;QACE,OAAO,gBAAG,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAE,UAAC,eAAiC,IAAK,sBAAe,CAAC,KAAK,EAArB,CAAqB,CAAC,CAAC;IAChH,CAAC;IAEO,kCAAW,GAAnB,UAAoB,CAAQ;QAC1B,CAAC,CAAC,eAAe,EAAE,CAAC;QACpB,IAAI,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YAC5B,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;IACH,CAAC;IAEO,2CAAoB,GAA5B,UAA6B,CAAQ;QACnC,IAAI,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YAC5B,IAAI,CAAC,eAAe,EAAE,CAAC;SACxB;aAAM;YACL,IAAI,CAAC,WAAW,CAAC,QAAE,CAAC,CAAC,CAAC,MAAqB,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC;SACtD;IACH,CAAC;IAEO,iCAAU,GAAlB,UAAmB,CAAa;QAC9B,IAAM,aAAa,GAAG,CAAC,CAAC,aAA4B,CAAC;QACrD,IAAI,CAAC,aAAa,EAAE;YAClB,OAAO;SACR;QACD,IAAI,CAAC,QAAE,CAAC,aAAa,CAAC,CAAC,MAAM,CAAC,qBAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,EAAE;YAC1E,IAAI,CAAC,cAAc,EAAE,CAAC;SACvB;IACH,CAAC;IAEO,wCAAiB,GAAzB,UAA0B,QAAkB;QAC1C,IAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAChD,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC1D,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,kCAAkC,CAAC,CAAC;QACnE,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC,EAAE;YAC9B,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAChE,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC;SAC9D;aAAM;YACL,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC3C,IAAI,CAAC,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;YAExC,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC7B,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC;aACjE;SACF;QAED,IAAI,cAAc,CAAC,MAAM,IAAI,CAAC,EAAE;YAC9B,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;SACvB;QAED,IAAM,MAAM,GAAG,QAAQ,CAAC,UAAU,EAAE;YAClC,CAAC,CAAC,kDAAwB,CAAC,uBAAuB;YAClD,CAAC,CAAC,kDAAwB,CAAC,yBAAyB,CAAC;QACvD,IAAI,CAAC,cAAc,CAAC,cAAc,CAA6B,MAAM,EAAE;YACrE,iBAAiB,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK;YACrC,yBAAyB,EAAE,QAAQ,CAAC,KAAK;YACzC,iBAAiB,EAAU,IAAI,CAAC,OAAO,CAAC,KAAK;SAC9C,CAAC,CAAC;QACH,IAAI,IAAI,CAAC,kBAAkB,EAAE;YAC3B,IAAI,CAAC,eAAe,CAAC,YAAY,EAAE,CAAC;SACrC;IACH,CAAC;IAEO,qCAAc,GAAtB,UAAuB,KAAa;QAApC,iBAOC;QANC,IAAM,QAAQ,GAAG,IAAI,mBAAQ,CAAC;YAC5B,KAAI,CAAC,iBAAiB,CAAC,QAAQ,CAAC,CAAC;QACnC,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;QAChC,QAAQ,CAAC,UAAU,EAAE,CAAC,KAAK,GAAG,WAAC,CAAC,KAAK,CAAC,CAAC;QACvC,QAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,YAAY,CAAC,UAAU,EAAE,GAAG,CAAC,CAAC;QACxD,OAAO,EAAE,QAAQ,YAAE,KAAK,SAAE,CAAC;IAC7B,CAAC;IAEO,uCAAgB,GAAxB;QAAA,iBAqBC;QApBC,IAAI,IAAI,CAAC,kBAAkB,CAAC,MAAM,GAAG,CAAC,EAAE;YACtC,IAAI,CAAC,UAAU,GAAG,gBAAG,CAAC,IAAI,CAAC,kBAAkB,EAAE,iBAAO,IAAI,YAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAA5B,CAA4B,CAAC,CAAC;YACxF,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,kBAAQ;gBAC5B,IAAI,KAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE;oBACxD,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;iBACzC;YACH,CAAC,CAAC,CAAC;SACJ;aAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,EAAE;YAC3C,IAAI,CAAC,UAAU,GAAG,gBAAG,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,iBAAO,IAAI,YAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAA5B,CAA4B,CAAC,CAAC;SACrF;aAAM,IAAI,IAAI,CAAC,oBAAoB,IAAI,SAAS,EAAE;YACjD,IAAI,CAAC,UAAU,GAAG,gBAAG,CAAC,IAAI,CAAC,oBAAoB,EAAE,iBAAO,IAAI,YAAI,CAAC,cAAc,CAAC,OAAO,CAAC,EAA5B,CAA4B,CAAC,CAAC;SAC3F;QACD,iBAAI,CAAC,IAAI,CAAC,UAAU,EAAE,gBAAM;YAC1B,KAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC;QAC3D,CAAC,CAAC,CAAC;QACH,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,EAAE;YAC9B,QAAE,CAAC,QAAE,CAAC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,UAAU,EAAE,CAAC,CAAC,IAAI,CAAC,wBAAwB,CAAC,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE;gBAClH,KAAI,CAAC,cAAc,EAAE,CAAC;YACxB,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEO,2CAAoB,GAA5B;QACE,IAAI,CAAC,cAAc,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,oCAAoC,EAAE,CAAC,CAAC;IACvF,CAAC;IAEO,mCAAY,GAApB;QACE,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC;QAC7C,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;QACjD,IAAI,CAAC,mBAAmB,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAChD,IAAI,CAAC,cAAc,EAAE,CAAC;IACxB,CAAC;IAEO,kCAAW,GAAnB;QACE,IAAM,MAAM,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,2BAA2B,EAAE,CAAC,CAAC;QACtE,IAAI,CAAC,WAAW,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,+BAA+B,EAAE,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC;QACxH,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QACnC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,kBAAkB,EAAE,CAAC,CAAC;QACzC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC,CAAC;QAC3C,OAAO,MAAM,CAAC,EAAE,CAAC;IACnB,CAAC;IAEO,2CAAoB,GAA5B;QACE,IAAI,OAAO,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,yCAAyC,EAAE,EAAE,mBAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC;QAChH,eAAM,CAAC,wBAAwB,CAAC,OAAO,EAAE,oCAAoC,CAAC,CAAC;QAC/E,OAAO,OAAO,CAAC;IACjB,CAAC;IAEO,yCAAkB,GAA1B;QACE,IAAI,CAAC,aAAa,GAAG,QAAE,CACrB,MAAM,EACN,EAAE,SAAS,EAAE,4DAA4D,EAAE,EAC3E,IAAI,CAAC,4BAA4B,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CACtD,CAAC;QACF,OAAO,IAAI,CAAC,aAAa,CAAC,EAAE,CAAC;IAC/B,CAAC;IAEO,qCAAc,GAAtB;QAAA,iBAUC;QATC,IAAM,QAAQ,GAAG,QAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,4BAA4B,CAAC,CAAC;QAElE,IAAI,QAAQ,IAAI,IAAI,EAAE;YACpB,IAAI,CAAC,QAAQ,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,2BAA2B,EAAE,CAAC,CAAC;YACtE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;SACzC;aAAM;YACL,IAAI,CAAC,QAAQ,GAAG,QAAE,CAAC,QAAQ,CAAC,CAAC;SAC9B;QACD,IAAI,CAAC,QAAQ,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,cAAc,EAAE,EAArB,CAAqB,CAAC,CAAC;IACzD,CAAC;IAEO,+CAAwB,GAAhC,UAAiC,IAAkC;QAAnE,iBAsBC;QArBC,IAAI,IAAI,CAAC,4BAA4B,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE;YAClD,IAAM,IAAI,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,+BAA+B,EAAE,CAAC,CAAC;YACvE,IAAM,KAAK,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,qCAAqC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACnG,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;YACtB,IAAM,QAAM,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,sCAAsC,EAAE,CAAC,CAAC;YACjF,IAAI,CAAC,MAAM,CAAC,QAAM,CAAC,EAAE,CAAC,CAAC;YAEvB,iBAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,EAAE,iCAAuB;gBAC/D,IAAM,KAAK,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,qCAAqC,EAAE,EAAE,KAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC,CAAC;gBACpI,QAAM,CAAC,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACxB,IAAM,YAAY,GAAG,QAAE,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,qCAAqC,EAAE,EAAE,mBAAQ,CAAC,KAAK,CAAC,yBAAyB,CAAC,CAAC;gBAChI,eAAM,CAAC,wBAAwB,CAAC,YAAY,CAAC,EAAE,EAAE,yCAAyC,CAAC,CAAC;gBAC5F,KAAK,CAAC,MAAM,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBAC9B,KAAK,CAAC,EAAE,CAAC,KAAK,GAAG,KAAI,CAAC,eAAe,CAAC,uBAAuB,CAAC,KAAK,CAAC,CAAC;gBACrE,QAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,cAAM,YAAI,CAAC,0BAA0B,CAAC,uBAAuB,CAAC,EAAxD,CAAwD,CAAC,CAAC;YACxF,CAAC,CAAC,CAAC;YAEH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;gBACpB,OAAO,EAAE,IAAI,CAAC,EAAE;aACjB,CAAC,CAAC;SACJ;IACH,CAAC;IAEO,iDAA0B,GAAlC,UAAmC,eAAiC;QAClE,eAAe,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;QACjC,IAAI,CAAC,qBAAqB,EAAE,CAAC;IAC/B,CAAC;IAEO,4CAAqB,GAA7B;QACE,yGAAyG;QACzG,kFAAkF;QAClF,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QACzB,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;IACjC,CAAC;IAEO,yCAAkB,GAA1B,UAA2B,IAA4B;QACrD,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACnC,IAAI,CAAC,mBAAmB,EAAE,CAAC,WAAW,CAAC,kBAAkB,CAAC,CAAC;SAC5D;aAAM;YACL,IAAI,CAAC,mBAAmB,EAAE,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;SACzD;QAED,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,EAAE;YACpC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YAClC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,cAAc,CAAC,oBAAoB,EAAE,CAAC;YACvE,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC7B,IAAI,CAAC,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,6CAA6C,CAAC,EAAE;gBAC7E,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;aACvB;SACF;IACH,CAAC;IAEO,0CAAmB,GAA3B,UAA4B,IAA6B;QACvD,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACpB,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACjC,IAAM,cAAc,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAEhD,IAAI,cAAc,CAAC,MAAM,GAAG,CAAC,EAAE;YAC7B,IAAI,CAAC,YAAY,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;SAC9G;IACH,CAAC;IAEO,8CAAuB,GAA/B,UAAgC,IAAiC;QAC/D,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,SAAS,EAAE;YACpC,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YACpB,eAAM,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;YACjC,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACnD,IAAI,CAAC,cAAc,GAAG,IAAI,uCAAkB,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YACjE,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,IAAI,CAAC,CAAC;SACnD;IACH,CAAC;IAEO,mDAA4B,GAApC;QACE,OAAO,mBAAM,CAAC,IAAI,CAAC,UAAU,EAAE,UAAC,eAAiC,IAAK,sBAAe,CAAC,QAAQ,CAAC,UAAU,EAAE,EAArC,CAAqC,CAAC,CAAC;IAC/G,CAAC;IAEO,wCAAiB,GAAzB,UAA0B,KAAa;QACrC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,CAAC;IACrD,CAAC;IAEO,mCAAY,GAApB;QACE,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,kCAAkC,CAAC,CAAC;IAC7D,CAAC;IAEO,mCAAY,GAApB;QACE,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,kCAAkC,CAAC,CAAC;IAChE,CAAC;IAEO,0CAAmB,GAA3B;QACE,IAAI,QAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,oCAAoC,CAAC,IAAI,IAAI,EAAE;YACpE,IAAM,OAAO,GAAG,QAAE,CAAC,KAAK,EAAE,EAAE,SAAS,EAAE,mCAAmC,EAAE,CAAC,CAAC;YAC9E,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACnC,OAAO,OAAO,CAAC;SAChB;aAAM;YACL,IAAM,OAAO,GAAG,QAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;YACzE,OAAO,QAAE,CAAC,OAAO,CAAC,CAAC;SACpB;IACH,CAAC;IAEO,4CAAqB,GAA7B;QACE,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YAClB,IAAI,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;YAC5B,IAAI,CAAC,gBAAgB,EAAE,CAAC;SACzB;QAED,IAAI,IAAI,CAAC,UAAU,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;YACjD,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,0BAA0B,CAAC,CAAC;SACvD;aAAM;YACL,QAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,WAAW,CAAC,0BAA0B,CAAC,CAAC;SAC1D;QACD,QAAE,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,4BAA4B,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;IACrF,CAAC;IA1eM,eAAE,GAAG,cAAc,CAAC;IACpB,qBAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,YAAY;SACb,CAAC,CAAC;IACL,CAAC,CAAC;IACF;;;OAGG;IACI,oBAAO,GAAyB;QACrC;;;;WAIG;QACH,qBAAqB,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QAEtF;;;;;WAKG;QACH,MAAM,EAAE,mCAAgB,CAAC,eAAe,EAAU;QAElD;;;;WAIG;QACH,KAAK,EAAE,mCAAgB,CAAC,gBAAgB,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAE5D;;;;WAIG;QACH,KAAK,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,YAAY,EAAE,WAAC,CAAC,SAAS,CAAC,EAAE,CAAC;QAEzE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;WAkCG;QACH,YAAY,EAAE,mCAAgB,CAAC,eAAe,EAAE;KACjD,CAAC;IA+ZJ,mBAAC;CAAA,CA5eiC,qBAAS,GA4e1C;AA5eY,oCAAY;AA8ezB,+BAAc,CAAC,2BAA2B,CAAC,YAAY,CAAC,CAAC;;;;;;;;ACvhBzD,yC;;;;;;;ACAA,yC;;;;;;;;;;ACAA,iCAAiC;AACjC,4CAAsD;AACtD,2CAAoD;AACpD,0CAA8C;AAC9C,0CAAkD;AAClD,qCAA0C;AAC1C,mCAAqC;AACrC,+BAAgC;AAEhC,uCAA0C;AAE1C;IAAA;IAkGA,CAAC;IAjGQ,sCAA2B,GAAlC,UAAmC,KAAa,EAAE,YAAqB;QACrE,OAAO,IAAI,MAAM,CAAC,yBAAW,CAAC,aAAa,CAAC,KAAK,EAAE,YAAY,CAAC,EAAE,GAAG,CAAC,CAAC;IACzE,CAAC;IAEM,yCAA8B,GAArC,UAAsC,QAAgB,EAAE,KAAkC;QACxF,IAAI,GAAG,GAAG,CAAC,QAAQ,CAAC,CAAC;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,2BAA2B,CAAC,QAAQ,EAAE,KAAK,CAAC,OAAO,CAAC,wBAAwB,CAAC,CAAC;QAC/F,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,EAAE;YAC9B,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC;iBAChC,KAAK,EAAE;iBACP,MAAM,CAAC,cAAI;gBACV,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC;iBACD,IAAI,CAAC,eAAK;gBACT,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CAAC,CAAC;YACL,IACE,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,CAAC;gBAC7E,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,EAC3E;gBACA,CAAC,CAAC,IAAI,CAAC,qBAAS,CAAC,mBAAmB,EAAE,EAAE,UAAC,KAAa,EAAE,GAAW;oBACjE,IAAI,CAAC,CAAC,GAAG,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE;wBAC7D,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;qBACf;gBACH,CAAC,CAAC,CAAC;aACJ;SACF;aAAM,IACL,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,aAAa,CAAC;YAC7E,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,WAAW,CAAC,EAC3E;YACA,CAAC,CAAC,IAAI,CACJ,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,qBAAS,CAAC,mBAAmB,EAAE,CAAC,EAAE,cAAI;gBACrD,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,CAAC,CAAC,EACF,eAAK;gBACH,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;YACrB,CAAC,CACF,CAAC;SACH;aAAM,IAAI,uBAAU,CAAC,sBAAsB,CAAS,KAAK,CAAC,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE;YACnF,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,eAAK;gBAC1B,IAAI,KAAK,CAAC,IAAI,CAAC,qBAAS,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,EAAE;oBAClD,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC/C;YACH,CAAC,CAAC,CAAC;SACJ;QACD,OAAO,GAAG,CAAC;IACb,CAAC;IAEM,kCAAuB,GAA9B,UAA+B,MAAgB;QAC7C,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,eAAK;YAC1B,OAAO,aAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;QACH,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;QACpC,OAAO,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1B,CAAC;IAEM,iCAAsB,GAA7B,UACE,mBAA2B,EAC3B,eAAuB,EACvB,eAAuB,EACvB,mBAA2B;QAE3B,oDAAoD;QACpD,sFAAsF;QACtF,uHAAuH;QACvH,OAAO,mBAAmB,GAAG,eAAe,IAAI,mBAAmB,GAAG,mBAAmB,IAAI,mBAAmB,GAAG,eAAe,CAAC;IACrI,CAAC;IAEM,0CAA+B,GAAtC,UAAuC,KAAkC,EAAE,SAAsB;QAC/F,iJAAiJ;QACjJ,IAAI,KAAK,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,IAAI,CAAC,EAAE;YAC1C,IAAI,QAAQ,GAAG,QAAE,CAAC,SAAS,CAAC,CAAC,OAAO,CAAC,yBAAyB,CAAC,CAAC;YAChE,CAAC,CAAC,IAAI,CAAC,QAAQ,EAAE,iBAAO;gBACtB,QAAE,CAAC,OAAO,CAAC,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,oCAAyB,GAAhC,UAAiC,KAAa,EAAE,KAAa;QAC3D,IAAI,KAAa,CAAC;QAElB,IAAI,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,WAAW,CAAC,EAAE;YACvE,KAAK,GAAG,qBAAS,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;SAC9C;aAAM,IAAI,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,aAAa,CAAC,EAAE;YAChF,KAAK,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;SAChD;aAAM,IAAI,uBAAU,CAAC,sBAAsB,CAAC,KAAK,CAAC,WAAW,EAAE,EAAE,QAAQ,CAAC,IAAI,KAAK,IAAI,QAAQ,EAAE;YAChG,IAAI;gBACF,IAAI,KAAK,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;gBAC5B,KAAK,GAAG,qBAAS,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;aAC5C;YAAC,OAAO,EAAE,EAAE;gBACX,aAAa;aACd;SACF;aAAM;YACL,KAAK,GAAG,WAAC,CAAC,KAAK,CAAC,CAAC;SAClB;QACD,OAAO,KAAK,IAAI,SAAS,IAAI,aAAK,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC;IAC7E,CAAC;IACH,iBAAC;AAAD,CAAC;AAlGY,gCAAU;;;;;;;;;;;ACXvB,yBAA+B;AAE/B,+BAAgC;AAKhC;IAIE,4BAAmB,YAA0B,EAAS,OAA6B;QAAhE,iBAAY,GAAZ,YAAY,CAAc;QAAS,YAAO,GAAP,OAAO,CAAsB;QAH3E,yBAAoB,GAAa,EAAE,CAAC;IAG0C,CAAC;IAEhF,iDAAoB,GAA3B;QACE,OAAO,IAAI,CAAC,oBAAoB,CAAC;IACnC,CAAC;IAEM,oCAAO,GAAd,UAAe,IAA4B;QAA3C,iBAUC;QATC,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAC/B,IAAM,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC;QAClD,IAAI,aAAa,CAAC,MAAM,GAAG,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,SAAS,EAAE;YAC1D,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,MAAM,EAAE,eAAK;gBAC/C,IAAI,KAAI,CAAC,oBAAoB,CAAC,OAAO,CAAC,KAAK,CAAC,WAAW,CAAC,GAAG,CAAC,EAAE;oBAC5D,KAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC;iBACnD;YACH,CAAC,CAAC,CAAC;SACJ;IACH,CAAC;IAEM,oDAAuB,GAA9B,UAA+B,IAAiC;QAC9D,IAAM,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC;QACvC,IAAI,CAAC,0BAA0B,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAEO,uDAA0B,GAAlC,UAAmC,YAA0B;QAC3D,IAAM,cAAc,GAAG,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACxD,YAAY,CAAC,eAAe,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QAClD,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAAC;IAC1D,CAAC;IAEO,sDAAyB,GAAjC;QACE,IAAI,cAAc,GAAoB;YACpC,KAAK,EAAU,IAAI,CAAC,OAAO,CAAC,KAAK;YACjC,qBAAqB,EAAE,IAAI,CAAC,OAAO,CAAC,qBAAqB;YACzD,cAAc,EAAE,IAAI;SACrB,CAAC;QACF,OAAO,cAAc,CAAC;IACxB,CAAC;IACH,yBAAC;AAAD,CAAC;AAzCY,gDAAkB","file":"SimpleFilter__f056675ccb969b1e6859.js","sourcesContent":["import { IStringMap } from '../rest/GenericParam';\nimport * as _ from 'underscore';\n\nexport class SVGDom {\n  public static addClassToSVGInContainer(svgContainer: HTMLElement, classToAdd: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', `${SVGDom.getClass(svgElement)}${classToAdd}`);\n  }\n\n  public static removeClassFromSVGInContainer(svgContainer: HTMLElement, classToRemove: string) {\n    const svgElement = svgContainer.querySelector('svg');\n    svgElement.setAttribute('class', SVGDom.getClass(svgElement).replace(classToRemove, ''));\n  }\n\n  public static addStyleToSVGInContainer(svgContainer: HTMLElement, styleToAdd: IStringMap<any>) {\n    const svgElement = svgContainer.querySelector('svg');\n    _.each(styleToAdd, (styleValue, styleKey) => {\n      svgElement.style[styleKey] = styleValue;\n    });\n  }\n\n  private static getClass(svgElement: SVGElement) {\n    const className = svgElement.getAttribute('class');\n    return className ? className + ' ' : '';\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/SVGDom.ts","import { Logger } from '../misc/Logger';\nimport { ComponentEvents } from '../ui/Base/Component';\nimport { KEYBOARD, KeyboardUtils } from '../utils/KeyboardUtils';\nimport { $$, Dom } from './Dom';\nimport 'styling/_AccessibleButton';\n\nexport class AccessibleButton {\n  private element: Dom;\n  private label: string;\n  private title: string;\n\n  private clickAction: (e: Event) => void;\n  private enterKeyboardAction: (e: Event) => void;\n  private blurAction: (e: Event) => void;\n  private mouseleaveAction: (e: Event) => void;\n  private focusAction: (e: Event) => void;\n  private mouseenterAction: (e: Event) => void;\n\n  private logger: Logger;\n  private eventOwner: ComponentEvents;\n\n  public constructor() {\n    this.logger = new Logger(this);\n  }\n\n  public withOwner(owner: ComponentEvents) {\n    this.eventOwner = owner;\n    return this;\n  }\n\n  public withElement(element: Dom | HTMLElement) {\n    if (element instanceof HTMLElement) {\n      this.element = $$(element);\n    } else {\n      this.element = element;\n    }\n    return this;\n  }\n\n  public withLabel(label: string) {\n    this.label = label;\n    return this;\n  }\n\n  public withTitle(title: string) {\n    this.title = title;\n    return this;\n  }\n\n  public withSelectAction(action: (e: Event) => void) {\n    this.clickAction = action;\n    this.enterKeyboardAction = action;\n    return this;\n  }\n\n  public withClickAction(clickAction: (e: Event) => void) {\n    this.clickAction = clickAction;\n    return this;\n  }\n\n  public withEnterKeyboardAction(enterAction: (e: Event) => void) {\n    this.enterKeyboardAction = enterAction;\n    return this;\n  }\n\n  public withFocusAndMouseEnterAction(action: (e: Event) => void) {\n    this.focusAction = action;\n    this.mouseenterAction = action;\n    return this;\n  }\n\n  public withFocusAction(action: (e: Event) => void) {\n    this.focusAction = action;\n    return this;\n  }\n\n  public withMouseEnterAction(action: (e: Event) => void) {\n    this.mouseenterAction = action;\n    return this;\n  }\n\n  public withBlurAndMouseLeaveAction(action: (e: Event) => void) {\n    this.mouseleaveAction = action;\n    this.blurAction = action;\n    return this;\n  }\n\n  public withMouseLeaveAction(action: (e: Event) => void) {\n    this.mouseleaveAction = action;\n    return this;\n  }\n\n  public withBlurAction(action: (e: Event) => void) {\n    this.blurAction = action;\n    return this;\n  }\n\n  public build() {\n    if (!this.element) {\n      this.element = $$('div');\n    }\n\n    this.ensureCorrectRole();\n    this.ensureCorrectLabel();\n    this.ensureTitle();\n    this.ensureSelectAction();\n    this.ensureUnselectAction();\n    this.ensureMouseenterAndFocusAction();\n    this.ensureMouseleaveAndBlurAction();\n    this.ensureDifferentiationBetweenKeyboardAndMouseFocus();\n\n    return this;\n  }\n\n  private ensureDifferentiationBetweenKeyboardAndMouseFocus() {\n    const classOnPress = 'coveo-accessible-button-pressed';\n    const classOnFocus = 'coveo-accessible-button-focused';\n    $$(this.element).addClass('coveo-accessible-button');\n\n    $$(this.element).on('mousedown', () => {\n      $$(this.element).addClass(classOnPress);\n      $$(this.element).removeClass(classOnFocus);\n    });\n\n    $$(this.element).on('mouseup', () => $$(this.element).removeClass(classOnPress));\n    $$(this.element).on('focus', () => {\n      if (!$$(this.element).hasClass(classOnPress)) {\n        $$(this.element).addClass(classOnFocus);\n      }\n    });\n\n    $$(this.element).on('blur', () => $$(this.element).removeClass(classOnFocus));\n  }\n\n  private ensureCorrectRole() {\n    if (!this.element.getAttribute('role')) {\n      this.element.setAttribute('role', 'button');\n    }\n  }\n\n  private ensureCorrectLabel() {\n    if (!this.label) {\n      this.logger.error(`Missing label to create an accessible button !`);\n      return;\n    }\n    this.element.setAttribute('aria-label', this.label);\n  }\n\n  private ensureTitle() {\n    this.title && this.element.setAttribute('title', this.title);\n  }\n\n  private ensureTabIndex() {\n    this.element.setAttribute('tabindex', '0');\n  }\n\n  private ensureSelectAction() {\n    if (this.enterKeyboardAction) {\n      this.ensureTabIndex();\n      this.bindEvent('keyup', KeyboardUtils.keypressAction(KEYBOARD.ENTER, (e: Event) => this.enterKeyboardAction(e)));\n    }\n\n    if (this.clickAction) {\n      this.bindEvent('click', this.clickAction);\n    }\n  }\n\n  private ensureUnselectAction() {\n    if (this.blurAction) {\n      this.bindEvent('blur', this.blurAction);\n    }\n\n    if (this.mouseleaveAction) {\n      this.bindEvent('mouseleave', this.mouseleaveAction);\n    }\n  }\n\n  private ensureMouseenterAndFocusAction() {\n    if (this.mouseenterAction) {\n      this.bindEvent('mouseenter', this.mouseenterAction);\n    }\n    if (this.focusAction) {\n      this.bindEvent('focus', this.focusAction);\n    }\n  }\n\n  private ensureMouseleaveAndBlurAction() {\n    if (this.mouseleaveAction) {\n      this.bindEvent('mouseleave', this.mouseleaveAction);\n    }\n    if (this.blurAction) {\n      this.bindEvent('blur', this.blurAction);\n    }\n  }\n\n  private bindEvent(event: string, action: (...args: any[]) => void) {\n    if (this.eventOwner) {\n      this.eventOwner.on(this.element, event, action);\n    } else {\n      $$(this.element).on(event, action);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/AccessibleButton.ts","import 'styling/_SimpleFilter';\nimport { contains, each, filter, keys, map } from 'underscore';\nimport { BreadcrumbEvents, IPopulateBreadcrumbEventArgs } from '../../events/BreadcrumbEvents';\nimport { IBuildingQueryEventArgs, IDoneBuildingQueryEventArgs, IQuerySuccessEventArgs, QueryEvents } from '../../events/QueryEvents';\nimport { exportGlobally } from '../../GlobalExports';\nimport { Assert } from '../../misc/Assert';\nimport { l } from '../../strings/Strings';\nimport { AccessibleButton } from '../../utils/AccessibleButton';\nimport { $$, Dom } from '../../utils/Dom';\nimport { SVGDom } from '../../utils/SVGDom';\nimport { SVGIcons } from '../../utils/SVGIcons';\nimport { analyticsActionCauseList, IAnalyticsSimpleFilterMeta } from '../Analytics/AnalyticsActionListMeta';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { ComponentOptions, IFieldOption } from '../Base/ComponentOptions';\nimport { Initialization } from '../Base/Initialization';\nimport { FacetUtils } from '../Facet/FacetUtils';\nimport { Checkbox } from '../FormWidgets/Checkbox';\nimport { SimpleFilterValues } from './SimpleFilterValues';\n\nexport interface ISimpleFilterOptions {\n  title: string;\n  values: string[];\n  field: IFieldOption;\n  valueCaption: any;\n  maximumNumberOfValues: number;\n}\n\ninterface ILabeledCheckbox {\n  checkbox: Checkbox;\n  label: string;\n}\n\n/**\n * The `SimpleFilter` component displays a dropdown menu containing field values which the end user can select to filter\n * the query results.\n *\n * The list of available field values in the dropdown menu can either be static (defined through the\n * [`values`]{@link SimpleFilter.options.values} option), or dynamic (automatically obtained through a\n * [`GroupByRequest`]{@link IGroupByRequest} operation performed at the same time as the main query).\n */\nexport class SimpleFilter extends Component {\n  static ID = 'SimpleFilter';\n  static doExport = () => {\n    exportGlobally({\n      SimpleFilter\n    });\n  };\n  /**\n   * The possible options for the SimpleFilter.\n   * @componentOptions\n   */\n  static options: ISimpleFilterOptions = {\n    /**\n     * Specifies the maximum number of field values to display in the `SimpleFilter` dropdown menu.\n     *\n     * Default value is `5`. Minimum value is `0`.\n     */\n    maximumNumberOfValues: ComponentOptions.buildNumberOption({ defaultValue: 5, min: 0 }),\n\n    /**\n     * Specifies a static list of field values to display in the `SimpleFilter` dropdown menu.\n     *\n     * This option is undefined by default, which means that the component generates a dynamic list of field values\n     * by performing a [`GroupByRequest`]{@link IGroupByRequest} operation at the same time as the main query.\n     */\n    values: ComponentOptions.buildListOption<string>(),\n\n    /**\n     * Specifies the field whose values the `SimpleFilter` should output result filters from.\n     *\n     * Specifying a value for this option is required for the `SimpleFilter` component to work.\n     */\n    field: ComponentOptions.buildFieldOption({ required: true }),\n\n    /**\n     * Specifies the title to display for the `SimpleFilter`.\n     *\n     * Default value is the localized string for `NoTitle`.\n     */\n    title: ComponentOptions.buildStringOption({ defaultValue: l('NoTitle') }),\n\n    /**\n     * Specifies a JSON object describing a mapping of `SimpleFilter` values to their desired captions.\n     *\n     * **Examples:**\n     *\n     * * You can set the option in the ['init']{@link init} call:\n     * ```javascript\n     * var myValueCaptions = {\n     *   \"txt\" : \"Text files\",\n     *   \"html\" : \"Web page\",\n     *   [ ... ]\n     * };\n     *\n     * Coveo.init(document.querySelector(\"#search\"), {\n     *   SimpleFilter : {\n     *     valueCaption : myValueCaptions\n     *   }\n     * });\n     * ```\n     *\n     * * Or before the `init` call, using the ['options']{@link options} top-level function:\n     * ```javascript\n     * Coveo.options(document.querySelector(\"#search\"), {\n     *   SimpleFilter : {\n     *     valueCaption : myValueCaptions\n     *   }\n     * });\n     * ```\n     *\n     * * Or directly in the markup:\n     * ```html\n     * <!-- Ensure that the double quotes are properly handled in `data-value-caption`. -->\n     * <div class='CoveoSimpleFilter' data-field='@myotherfield' data-value-caption='{\"txt\":\"Text files\",\"html\":\"Web page\"}'></div>\n     * ```\n     */\n    valueCaption: ComponentOptions.buildJsonOption()\n  };\n\n  private valueContainer: Dom;\n  private checkboxes: ILabeledCheckbox[];\n  private previouslySelected: string[] = [];\n  private circleElement: Dom;\n  private backdrop: Dom;\n  private selectTitle: Dom;\n  private groupByRequestValues: string[] = [];\n  private isSticky: boolean = false;\n  private groupByBuilder: SimpleFilterValues;\n  private shouldTriggerQuery = true;\n\n  /**\n   * Creates a new `SimpleFilter` component. Binds multiple query events as well.\n   * @param element the HTMLElement on which to instantiate the component.\n   * @param options The options for the `SimpleFilter` component.\n   * @param bindings The bindings that the component requires to function normally.\n   */\n  constructor(public element: HTMLElement, public options: ISimpleFilterOptions, public bindings?: IComponentBindings) {\n    super(element, SimpleFilter.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, SimpleFilter, options);\n    this.element.title = this.options.title;\n    this.buildContent();\n\n    new AccessibleButton()\n      .withElement(this.element)\n      .withClickAction((e: Event) => this.handleClick(e))\n      .withEnterKeyboardAction((e: KeyboardEvent) => this.handleKeyboardSelect(e))\n      .withBlurAction((e: MouseEvent) => this.handleBlur(e))\n      .withLabel(this.options.title)\n      .build();\n\n    this.bind.onRootElement(BreadcrumbEvents.populateBreadcrumb, (args: IPopulateBreadcrumbEventArgs) =>\n      this.handlePopulateBreadcrumb(args)\n    );\n    this.bind.onRootElement(BreadcrumbEvents.clearBreadcrumb, () => this.handleClearBreadcrumb());\n    this.bind.onRootElement(QueryEvents.buildingQuery, (args: IBuildingQueryEventArgs) => this.handleBuildingQuery(args));\n    this.bind.onRootElement(QueryEvents.doneBuildingQuery, (args: IDoneBuildingQueryEventArgs) => this.handleDoneBuildingQuery(args));\n    this.bind.onRootElement(QueryEvents.querySuccess, (args: IQuerySuccessEventArgs) => this.handleQuerySuccess(args));\n  }\n\n  /**\n   * Gets the `SimpleFilter` `valueContainer`.\n   * @returns {Dom} The `SimpleFilter` valueContainer.\n   */\n  public getValueContainer(): Dom {\n    return this.valueContainer;\n  }\n\n  /**\n   * Gets the caption of a specific field value.\n   * @param value The field value whose caption the method should attempt to get.\n   * @returns {any} The value caption, if available; the original value otherwise.\n   */\n  public getValueCaption(value: string): string {\n    let ret = value;\n\n    if (contains(keys(this.options.valueCaption), value)) {\n      ret = this.options.valueCaption[ret] || ret;\n      return l(ret);\n    } else {\n      return FacetUtils.tryToGetTranslatedCaption(this.options.field.toString(), ret);\n    }\n  }\n\n  /**\n   * Gets the captions of the currently selected field values in the `SimpleFilter`.\n   * @returns {string[]} An array containing the selected captions.\n   */\n  public getSelectedCaptions(): string[] {\n    return map(this.getSelectedValues(), (selectedValue: string) => this.getValueCaption(selectedValue));\n  }\n\n  /**\n   * Opens or closes the `SimpleFilter` `valueContainer`, depending on its current state.\n   */\n  public toggleContainer() {\n    $$(this.valueContainer).hasClass('coveo-simplefilter-value-container-expanded') ? this.closeContainer() : this.openContainer();\n  }\n\n  /**\n   * Selects the specified value. Also triggers a query, by default.\n   * @param value The value to select.\n   * @param triggerQuery `true` by default. If set to `false`, the method triggers no query.\n   */\n  public selectValue(value: string, triggerQuery = true) {\n    each(this.checkboxes, (labeledCheckbox: ILabeledCheckbox) => {\n      const translated = this.getValueCaption(labeledCheckbox.label);\n      if (labeledCheckbox.label == value || translated == value) {\n        labeledCheckbox.checkbox.select(triggerQuery);\n      }\n    });\n  }\n\n  /**\n   * Un-selects the specified value.\n   * @param value The value whose state the method should reset.\n   */\n  public deselectValue(value: string) {\n    each(this.checkboxes, (labeledCheckbox: ILabeledCheckbox) => {\n      const translated = this.getValueCaption(labeledCheckbox.label);\n      if (labeledCheckbox.label == value || translated == value) {\n        labeledCheckbox.checkbox.reset();\n      }\n    });\n  }\n\n  /**\n   * Selects or un-selects the specified value, depending on its current state.\n   * @param value The value whose state the method should toggle.\n   */\n  public toggleValue(value: string) {\n    each(this.checkboxes, (labeledCheckbox: ILabeledCheckbox) => {\n      const translated = this.getValueCaption(labeledCheckbox.label);\n      if (labeledCheckbox.label == value || translated == value) {\n        labeledCheckbox.checkbox.toggle();\n      }\n    });\n  }\n\n  /**\n   * Resets the component to its original state.\n   */\n  public resetSimpleFilter() {\n    each(this.checkboxes, (labeledCheckbox: ILabeledCheckbox) => {\n      if (labeledCheckbox.checkbox.isSelected()) {\n        this.deselectValue(labeledCheckbox.label);\n      }\n    });\n  }\n\n  /**\n   * Opens the `SimpleFilter` `valueContainer`.\n   */\n  public openContainer() {\n    $$(this.element).addClass('coveo-simplefilter-value-container-expanded');\n    this.valueContainer.addClass('coveo-simplefilter-value-container-expanded');\n    this.refreshValueContainer();\n    this.isSticky = true;\n    if (!this.backdrop.hasClass('coveo-dropdown-background-active')) {\n      this.showBackdrop();\n    }\n  }\n\n  /**\n   * Closes the `SimpleFilter` `valueContainer`.\n   */\n  public closeContainer() {\n    $$(this.element).removeClass('coveo-simplefilter-value-container-expanded');\n    this.valueContainer.removeClass('coveo-simplefilter-value-container-expanded');\n    if (this.backdrop.hasClass('coveo-dropdown-background-active')) {\n      this.hideBackdrop();\n    }\n    if (this.getSelectedLabeledCheckboxes().length == 0) {\n      this.isSticky = false;\n    }\n  }\n\n  private getSelectedValues() {\n    return map(this.getSelectedLabeledCheckboxes(), (labeledCheckbox: ILabeledCheckbox) => labeledCheckbox.label);\n  }\n\n  private handleClick(e: Event) {\n    e.stopPropagation();\n    if (e.target == this.element) {\n      this.toggleContainer();\n    }\n  }\n\n  private handleKeyboardSelect(e: Event) {\n    if (e.target == this.element) {\n      this.toggleContainer();\n    } else {\n      this.toggleValue($$(e.target as HTMLElement).text());\n    }\n  }\n\n  private handleBlur(e: MouseEvent) {\n    const relatedTarget = e.relatedTarget as HTMLElement;\n    if (!relatedTarget) {\n      return;\n    }\n    if (!$$(relatedTarget).parent(Component.computeCssClassName(SimpleFilter))) {\n      this.closeContainer();\n    }\n  }\n\n  private handleValueToggle(checkbox: Checkbox) {\n    const selectedValues = this.getSelectedValues();\n    this.circleElement.text(selectedValues.length.toString());\n    this.circleElement.removeClass('coveo-simplefilter-circle-hidden');\n    if (selectedValues.length == 1) {\n      this.setDisplayedTitle(this.getValueCaption(selectedValues[0]));\n      this.element.title = this.getValueCaption(selectedValues[0]);\n    } else {\n      this.setDisplayedTitle(this.options.title);\n      this.element.title = this.options.title;\n\n      if (selectedValues.length < 1) {\n        this.circleElement.addClass('coveo-simplefilter-circle-hidden');\n      }\n    }\n\n    if (selectedValues.length == 0) {\n      this.isSticky = false;\n    }\n\n    const action = checkbox.isSelected()\n      ? analyticsActionCauseList.simpleFilterSelectValue\n      : analyticsActionCauseList.simpleFilterDeselectValue;\n    this.usageAnalytics.logSearchEvent<IAnalyticsSimpleFilterMeta>(action, {\n      simpleFilterTitle: this.options.title,\n      simpleFilterSelectedValue: checkbox.label,\n      simpleFilterField: <string>this.options.field\n    });\n    if (this.shouldTriggerQuery) {\n      this.queryController.executeQuery();\n    }\n  }\n\n  private createCheckbox(label: string) {\n    const checkbox = new Checkbox(() => {\n      this.handleValueToggle(checkbox);\n    }, this.getValueCaption(label));\n    checkbox.getElement().title = l(label);\n    $$(checkbox.getElement()).setAttribute('tabindex', '0');\n    return { checkbox, label };\n  }\n\n  private createCheckboxes() {\n    if (this.previouslySelected.length > 0) {\n      this.checkboxes = map(this.previouslySelected, caption => this.createCheckbox(caption));\n      each(this.checkboxes, checkbox => {\n        if (this.previouslySelected.indexOf(checkbox.label) >= 0) {\n          this.selectValue(checkbox.label, false);\n        }\n      });\n    } else if (this.options.values != undefined) {\n      this.checkboxes = map(this.options.values, caption => this.createCheckbox(caption));\n    } else if (this.groupByRequestValues != undefined) {\n      this.checkboxes = map(this.groupByRequestValues, caption => this.createCheckbox(caption));\n    }\n    each(this.checkboxes, result => {\n      this.valueContainer.append(result.checkbox.getElement());\n    });\n    if (this.checkboxes.length > 0) {\n      $$($$(this.checkboxes[this.checkboxes.length - 1].checkbox.getElement()).find('.coveo-checkbox-button')).on('blur', () => {\n        this.closeContainer();\n      });\n    }\n  }\n\n  private createValueContainer() {\n    this.valueContainer = $$('div', { className: 'coveo-simplefilter-value-container' });\n  }\n\n  private buildContent() {\n    this.createValueContainer();\n    this.element.appendChild(this.buildSelect());\n    this.element.appendChild(this.valueContainer.el);\n    this.findOrCreateWrapper().append(this.element);\n    this.createBackdrop();\n  }\n\n  private buildSelect(): HTMLElement {\n    const select = $$('span', { className: 'coveo-simplefilter-select' });\n    this.selectTitle = $$('span', { className: 'coveo-simplefilter-selecttext' }, this.getValueCaption(this.options.title));\n    select.append(this.selectTitle.el);\n    select.append(this.buildCircleElement());\n    select.append(this.buildSvgToggleUpIcon());\n    return select.el;\n  }\n\n  private buildSvgToggleUpIcon(): HTMLElement {\n    let svgIcon = $$('span', { className: 'coveo-simplefilter-toggle-svg-container' }, SVGIcons.icons.arrowDown).el;\n    SVGDom.addClassToSVGInContainer(svgIcon, 'coveo-simplefilter-toggle-down-svg');\n    return svgIcon;\n  }\n\n  private buildCircleElement(): HTMLElement {\n    this.circleElement = $$(\n      'span',\n      { className: 'coveo-simplefilter-circle coveo-simplefilter-circle-hidden' },\n      this.getSelectedLabeledCheckboxes().length.toString()\n    );\n    return this.circleElement.el;\n  }\n\n  private createBackdrop() {\n    const backdrop = $$(this.root).find('.coveo-dropdown-background');\n\n    if (backdrop == null) {\n      this.backdrop = $$('div', { className: 'coveo-dropdown-background' });\n      this.root.appendChild(this.backdrop.el);\n    } else {\n      this.backdrop = $$(backdrop);\n    }\n    this.backdrop.on('click', () => this.closeContainer());\n  }\n\n  private handlePopulateBreadcrumb(args: IPopulateBreadcrumbEventArgs) {\n    if (this.getSelectedLabeledCheckboxes().length > 0) {\n      const elem = $$('div', { className: 'coveo-simplefilter-breadcrumb' });\n      const title = $$('span', { className: 'coveo-simplefilter-breadcrumb-title' }, this.options.title);\n      elem.append(title.el);\n      const values = $$('span', { className: 'coveo-simplefilter-breadcrumb-values' });\n      elem.append(values.el);\n\n      each(this.getSelectedLabeledCheckboxes(), selectedlabeledCheckbox => {\n        const value = $$('span', { className: 'coveo-simplefilter-breadcrumb-value' }, this.getValueCaption(selectedlabeledCheckbox.label));\n        values.append(value.el);\n        const svgContainer = $$('span', { className: 'coveo-simplefilter-breadcrumb-clear' }, SVGIcons.icons.checkboxHookExclusionMore);\n        SVGDom.addClassToSVGInContainer(svgContainer.el, 'coveo-simplefilter-breadcrumb-clear-svg');\n        value.append(svgContainer.el);\n        value.el.title = this.getValueCaption(selectedlabeledCheckbox.label);\n        $$(value).on('click', () => this.handleRemoveFromBreadcrumb(selectedlabeledCheckbox));\n      });\n\n      args.breadcrumbs.push({\n        element: elem.el\n      });\n    }\n  }\n\n  private handleRemoveFromBreadcrumb(labeledCheckbox: ILabeledCheckbox) {\n    labeledCheckbox.checkbox.reset();\n    this.refreshValueContainer();\n  }\n\n  private handleClearBreadcrumb() {\n    // Bit of a hack with that flag, but essentially we want \"clear breadcrumb\" to be a global, unique event.\n    // Not something that will log a special event for SimpleFilter (or any component)\n    this.shouldTriggerQuery = false;\n    this.resetSimpleFilter();\n    this.shouldTriggerQuery = true;\n  }\n\n  private handleQuerySuccess(data: IQuerySuccessEventArgs) {\n    if (data.results.results.length > 0) {\n      this.findOrCreateWrapper().removeClass('coveo-no-results');\n    } else {\n      this.findOrCreateWrapper().addClass('coveo-no-results');\n    }\n\n    if (this.options.values == undefined) {\n      this.groupByBuilder.groupBy(data);\n      this.groupByRequestValues = this.groupByBuilder.getValuesFromGroupBy();\n      this.refreshValueContainer();\n      if (!$$(this.element).hasClass('coveo-simplefilter-value-container-expanded')) {\n        this.isSticky = false;\n      }\n    }\n  }\n\n  private handleBuildingQuery(args: IBuildingQueryEventArgs) {\n    Assert.exists(args);\n    Assert.exists(args.queryBuilder);\n    const selectedValues = this.getSelectedValues();\n\n    if (selectedValues.length > 0) {\n      args.queryBuilder.advancedExpression.addFieldExpression(this.options.field.toString(), '==', selectedValues);\n    }\n  }\n\n  private handleDoneBuildingQuery(data: IDoneBuildingQueryEventArgs) {\n    if (this.options.values == undefined) {\n      Assert.exists(data);\n      Assert.exists(data.queryBuilder);\n      this.previouslySelected = this.getSelectedValues();\n      this.groupByBuilder = new SimpleFilterValues(this, this.options);\n      this.groupByBuilder.handleDoneBuildingQuery(data);\n    }\n  }\n\n  private getSelectedLabeledCheckboxes(): ILabeledCheckbox[] {\n    return filter(this.checkboxes, (labeledCheckbox: ILabeledCheckbox) => labeledCheckbox.checkbox.isSelected());\n  }\n\n  private setDisplayedTitle(title: string) {\n    this.selectTitle.text(this.getValueCaption(title));\n  }\n\n  private showBackdrop() {\n    this.backdrop.addClass('coveo-dropdown-background-active');\n  }\n\n  private hideBackdrop() {\n    this.backdrop.removeClass('coveo-dropdown-background-active');\n  }\n\n  private findOrCreateWrapper() {\n    if ($$(this.root).find('.coveo-simplefilter-header-wrapper') == null) {\n      const wrapper = $$('div', { className: 'coveo-simplefilter-header-wrapper' });\n      wrapper.insertBefore(this.element);\n      return wrapper;\n    } else {\n      const wrapper = $$(this.root).find('.coveo-simplefilter-header-wrapper');\n      return $$(wrapper);\n    }\n  }\n\n  private refreshValueContainer() {\n    if (!this.isSticky) {\n      this.valueContainer.empty();\n      this.createCheckboxes();\n    }\n\n    if (this.checkboxes.length == 0 && !this.isSticky) {\n      $$(this.element).addClass('coveo-simplefilter-empty');\n    } else {\n      $$(this.element).removeClass('coveo-simplefilter-empty');\n    }\n    $$(this.circleElement).text(this.getSelectedLabeledCheckboxes().length.toString());\n  }\n}\n\nInitialization.registerAutoCreateComponent(SimpleFilter);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SimpleFilter/SimpleFilter.ts","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_SimpleFilter.scss\n// module id = 365\n// module chunks = 18 78","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sass/_AccessibleButton.scss\n// module id = 367\n// module chunks = 0 1 2 3 4 5 6 7 8 9 10 11 13 15 16 18 19 20 22 23 24 25 26 28 29 30 31 37 38 39 40 41 42 78","/// <reference path='Facet.ts' />\nimport { StringUtils } from '../../utils/StringUtils';\nimport { QueryUtils } from '../../utils/QueryUtils';\nimport { FileTypes } from '../Misc/FileTypes';\nimport { DateUtils } from '../../utils/DateUtils';\nimport { Utils } from '../../utils/Utils';\nimport { $$ } from '../../utils/Dom';\nimport * as _ from 'underscore';\nimport FacetModuleDefinition = require('./Facet');\nimport { l } from '../../strings/Strings';\n\nexport class FacetUtils {\n  static getRegexToUseForFacetSearch(value: string, ignoreAccent: boolean) {\n    return new RegExp(StringUtils.stringToRegex(value, ignoreAccent), 'i');\n  }\n\n  static getValuesToUseForSearchInFacet(original: string, facet: FacetModuleDefinition.Facet): string[] {\n    let ret = [original];\n    let regex = this.getRegexToUseForFacetSearch(original, facet.options.facetSearchIgnoreAccents);\n    if (facet.options.valueCaption) {\n      _.chain(facet.options.valueCaption)\n        .pairs()\n        .filter(pair => {\n          return regex.test(pair[1]);\n        })\n        .each(match => {\n          ret.push(match[0]);\n        });\n      if (\n        QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@objecttype') ||\n        QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@filetype')\n      ) {\n        _.each(FileTypes.getFileTypeCaptions(), (value: string, key: string) => {\n          if (!(key in facet.options.valueCaption) && regex.test(value)) {\n            ret.push(key);\n          }\n        });\n      }\n    } else if (\n      QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@objecttype') ||\n      QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@filetype')\n    ) {\n      _.each(\n        _.filter(_.pairs(FileTypes.getFileTypeCaptions()), pair => {\n          return regex.test(pair[1]);\n        }),\n        match => {\n          ret.push(match[0]);\n        }\n      );\n    } else if (QueryUtils.isStratusAgnosticField(<string>facet.options.field, '@month')) {\n      _.each(_.range(1, 13), month => {\n        if (regex.test(DateUtils.monthToString(month - 1))) {\n          ret.push(('0' + month.toString()).substr(-2));\n        }\n      });\n    }\n    return ret;\n  }\n\n  static buildFacetSearchPattern(values: string[]) {\n    values = _.map(values, value => {\n      return Utils.escapeRegexCharacter(value);\n    });\n    values[0] = '.*' + values[0] + '.*';\n    return values.join('|');\n  }\n\n  static needAnotherFacetSearch(\n    currentSearchLength: number,\n    newSearchLength: number,\n    oldSearchLength: number,\n    desiredSearchLength: number\n  ) {\n    // Something was removed (currentSearch < newSearch)\n    // && we might want to display more facet search result(currentSearch < desiredSearch)\n    // && the new query returned more stuff than the old one so there's still more results(currentSearchLength > oldLength)\n    return currentSearchLength < newSearchLength && currentSearchLength < desiredSearchLength && currentSearchLength > oldSearchLength;\n  }\n\n  static addNoStateCssClassToFacetValues(facet: FacetModuleDefinition.Facet, container: HTMLElement) {\n    // This takes care of adding the correct css class on each facet value checkbox (empty white box) if at least one value is selected in that facet\n    if (facet.values.getSelected().length != 0) {\n      let noStates = $$(container).findAll('li:not(.coveo-selected)');\n      _.each(noStates, noState => {\n        $$(noState).addClass('coveo-no-state');\n      });\n    }\n  }\n\n  static tryToGetTranslatedCaption(field: string, value: string) {\n    let found: string;\n\n    if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@filetype')) {\n      found = FileTypes.getFileType(value).caption;\n    } else if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@objecttype')) {\n      found = FileTypes.getObjectType(value).caption;\n    } else if (QueryUtils.isStratusAgnosticField(field.toLowerCase(), '@month') && value != 'Search') {\n      try {\n        let month = parseInt(value);\n        found = DateUtils.monthToString(month - 1);\n      } catch (ex) {\n        // Do nothing\n      }\n    } else {\n      found = l(value);\n    }\n    return found != undefined && Utils.isNonEmptyString(found) ? found : value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/Facet/FacetUtils.ts","import 'styling/_SimpleFilter';\nimport { IDoneBuildingQueryEventArgs, IQuerySuccessEventArgs } from '../../events/QueryEvents';\nimport * as _ from 'underscore';\nimport { QueryBuilder } from '../Base/QueryBuilder';\nimport { SimpleFilter, ISimpleFilterOptions } from './SimpleFilter';\nimport { IGroupByRequest } from '../../rest/GroupByRequest';\n\nexport class SimpleFilterValues {\n  private groupByRequestValues: string[] = [];\n  private position: number;\n\n  constructor(public simpleFilter: SimpleFilter, public options: ISimpleFilterOptions) {}\n\n  public getValuesFromGroupBy(): string[] {\n    return this.groupByRequestValues;\n  }\n\n  public groupBy(data: IQuerySuccessEventArgs) {\n    this.groupByRequestValues = [];\n    const groupByResult = data.results.groupByResults;\n    if (groupByResult.length > 0 && this.position != undefined) {\n      _.each(groupByResult[this.position].values, value => {\n        if (this.groupByRequestValues.indexOf(value.lookupValue) < 0) {\n          this.groupByRequestValues.push(value.lookupValue);\n        }\n      });\n    }\n  }\n\n  public handleDoneBuildingQuery(data: IDoneBuildingQueryEventArgs) {\n    const queryBuilder = data.queryBuilder;\n    this.putGroupByIntoQueryBuilder(queryBuilder);\n  }\n\n  private putGroupByIntoQueryBuilder(queryBuilder: QueryBuilder) {\n    const groupByRequest = this.createBasicGroupByRequest();\n    queryBuilder.groupByRequests.push(groupByRequest);\n    this.position = queryBuilder.groupByRequests.length - 1;\n  }\n\n  private createBasicGroupByRequest(): IGroupByRequest {\n    let groupByRequest: IGroupByRequest = {\n      field: <string>this.options.field,\n      maximumNumberOfValues: this.options.maximumNumberOfValues,\n      injectionDepth: 1000\n    };\n    return groupByRequest;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/SimpleFilter/SimpleFilterValues.ts"],"sourceRoot":""}