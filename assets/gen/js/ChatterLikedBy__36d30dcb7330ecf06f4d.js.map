{"version":3,"sources":["./src/utils/ChatterUtils.ts","./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"names":[],"mappings":";;;;;;;;AAAA;IAAA;IAQA,CAAC;IAPQ,qBAAQ,GAAf,UAAgB,SAAiB,EAAE,QAAgB,EAAE,WAAmB;QACtE,OAAO,SAAS,CAAC,OAAO,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC;IAClD,CAAC;IAEM,oCAAuB,GAA9B,UAA+B,OAAoB,EAAE,gBAAyB,EAAE,YAAqB;QACnG,OAAO,OAAO,CAAC;IACjB,CAAC;IACH,mBAAC;AAAD,CAAC;AARY,oCAAY;;;;;;;;;;;;;;;;;;;;;ACAzB,8CAAwD;AACxD,gDAA4D;AAC5D,yCAA8C;AAG9C,qCAA0C;AAC1C,mCAAqC;AACrC,uCAA0C;AAC1C,8CAAwD;AACxD,6CAAqD;AAQrD;IAAoC,kCAAS;IAe3C,wBACS,OAAoB,EACpB,OAAgC,EAChC,QAA6B,EAC7B,MAAqB;QAJ9B,YAME,kBAAM,OAAO,EAAE,cAAc,CAAC,EAAE,EAAE,QAAQ,CAAC,SA2B5C;QAhCQ,aAAO,GAAP,OAAO,CAAa;QACpB,aAAO,GAAP,OAAO,CAAyB;QAChC,cAAQ,GAAR,QAAQ,CAAqB;QAC7B,YAAM,GAAN,MAAM,CAAe;QAG5B,KAAI,CAAC,OAAO,GAAG,mCAAgB,CAAC,oBAAoB,CAAC,OAAO,EAAE,cAAc,EAAE,OAAO,CAAC,CAAC;QAEvF,IACE,CAAC,aAAK,CAAC,iBAAiB,CAAC,aAAK,CAAC,aAAa,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC;YAClE,CAAC,aAAK,CAAC,iBAAiB,CAAC,aAAK,CAAC,aAAa,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,EACpE;YACA,IAAI,SAAS,GAAG,aAAK,CAAC,aAAa,CAAC,MAAM,EAAE,WAAW,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YACpE,IAAI,OAAO,GAAG,aAAK,CAAC,aAAa,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAEpE,IAAI,WAAW,GAAG,QAAE,CAAC,KAAK,EAAE;gBAC1B,SAAS,EAAE,8BAA8B;aAC1C,CAAC,CAAC;YACH,QAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;YAEnC,IAAI,SAAS,GAAG,QAAE,CAAC,KAAK,EAAE;gBACxB,SAAS,EAAE,qEAAqE;aACjF,CAAC,CAAC;YACH,WAAW,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;YAEjC,IAAI,eAAe,GAAG,QAAE,CAAC,KAAK,EAAE;gBAC9B,SAAS,EAAE,4BAA4B;aACxC,CAAC,CAAC;YACH,WAAW,CAAC,MAAM,CAAC,eAAe,CAAC,EAAE,CAAC,CAAC;YAEvC,KAAI,CAAC,eAAe,CAAC,eAAe,CAAC,EAAE,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;SACpG;;IACH,CAAC;IAEO,wCAAe,GAAvB,UAAwB,OAAoB,EAAE,MAAoB,EAAE,SAAmB,EAAE,OAAiB,EAAE,eAAuB;QAAnI,iBAgCC;QA/BC,IAAI,WAAW,GAAG,QAAE,CAAC,KAAK,CAAC,CAAC;QAE5B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,GAAG,eAAe,CAAC,EAAE,CAAC,EAAE,EAAE;YAC5F,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAE1E,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,GAAG,eAAe,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC/E,WAAW,CAAC,MAAM,CAAC,QAAE,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;aAC7C;iBAAM,IAAI,CAAC,GAAG,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjC,WAAW,CAAC,MAAM,CAAC,QAAE,CAAC,MAAM,EAAE,EAAE,EAAE,MAAI,WAAC,CAAC,KAAK,CAAC,CAAC,WAAW,EAAE,MAAG,CAAC,CAAC,EAAE,CAAC,CAAC;aACtE;SACF;QAED,IAAI,eAAe,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,IAAI,eAAe,EAAE;YAC7D,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,SAAS,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7G;aAAM;YACL,IAAI,WAAW,GAAG,OAAO,CAAC,MAAM,GAAG,eAAe,CAAC;YACnD,IAAI,aAAa,GAAG,QAAE,CAAC,GAAG,CAAC,CAAC;YAC5B,aAAa,CAAC,IAAI,CAAC,MAAI,WAAC,CAAC,QAAQ,EAAE,WAAW,CAAC,QAAQ,EAAE,EAAE,WAAW,CAAG,CAAC,CAAC;YAC3E,aAAa,CAAC,EAAE,CAAC,OAAO,EAAE,UAAC,CAAQ;gBACjC,CAAC,CAAC,cAAc,EAAE,CAAC;gBACnB,QAAE,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,CAAC;gBACpB,KAAI,CAAC,eAAe,CAAC,OAAO,EAAE,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;YAC/D,CAAC,CAAC,CAAC;YACH,WAAW,CAAC,MAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;SACtC;QAED,IAAI,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YACtB,IAAI,MAAI,GAAG,QAAE,CAAC,MAAM,CAAC,CAAC;YACtB,MAAI,CAAC,EAAE,CAAC,SAAS,GAAG,WAAC,CAAC,WAAW,EAAE,WAAW,CAAC,EAAE,CAAC,SAAS,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;YAC7E,QAAE,CAAC,OAAO,CAAC,CAAC,MAAM,CAAC,MAAI,CAAC,EAAE,CAAC,CAAC;SAC7B;IACH,CAAC;IAEO,uCAAc,GAAtB,UAAuB,MAAoB,EAAE,QAAgB,EAAE,MAAc;QAC3E,IAAI,IAAI,GAAG,QAAE,CAAC,GAAG,EAAE;YACjB,IAAI,EAAE,2BAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,EAAE,aAAK,CAAC,aAAa,CAAC,MAAM,EAAE,cAAc,CAAC,EAAE,MAAM,CAAC;SAClG,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpB,OAAO,IAAI,CAAC,EAAE,CAAC;IACjB,CAAC;IAzFM,iBAAE,GAAG,gBAAgB,CAAC;IAEtB,uBAAQ,GAAG;QAChB,8BAAc,CAAC;YACb,cAAc,EAAE,cAAc;SAC/B,CAAC,CAAC;IACL,CAAC,CAAC;IAEK,sBAAO,GAA2B;QACvC,eAAe,EAAE,mCAAgB,CAAC,iBAAiB,CAAC,EAAE,YAAY,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC;QAChF,gBAAgB,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;QAC9E,YAAY,EAAE,mCAAgB,CAAC,kBAAkB,CAAC,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;KAC1E,CAAC;IA8EJ,qBAAC;CAAA,CA3FmC,qBAAS,GA2F5C;AA3FY,wCAAc;AA6F3B,+BAAc,CAAC,2BAA2B,CAAC,cAAc,CAAC,CAAC","file":"ChatterLikedBy__36d30dcb7330ecf06f4d.js","sourcesContent":["export class ChatterUtils {\n  static buildURI(objectURI: string, objectId: string, newObjectId: string) {\n    return objectURI.replace(objectId, newObjectId);\n  }\n\n  static bindClickEventToElement(element: HTMLElement, openInPrimaryTab: boolean, openInSubTab: boolean) {\n    return element;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/ChatterUtils.ts","import { Initialization } from '../Base/Initialization';\nimport { ComponentOptions } from '../Base/ComponentOptions';\nimport { Component } from '../Base/Component';\nimport { IComponentBindings } from '../Base/ComponentBindings';\nimport { IQueryResult } from '../../rest/QueryResult';\nimport { Utils } from '../../utils/Utils';\nimport { $$ } from '../../utils/Dom';\nimport { l } from '../../strings/Strings';\nimport { ChatterUtils } from '../../utils/ChatterUtils';\nimport { exportGlobally } from '../../GlobalExports';\n\nexport interface IChatterLikedByOptions {\n  nbLikesToRender: number;\n  openInPrimaryTab: boolean;\n  openInSubTab: boolean;\n}\n\nexport class ChatterLikedBy extends Component {\n  static ID = 'ChatterLikedBy';\n\n  static doExport = () => {\n    exportGlobally({\n      ChatterLikedBy: ChatterLikedBy\n    });\n  };\n\n  static options: IChatterLikedByOptions = {\n    nbLikesToRender: ComponentOptions.buildNumberOption({ defaultValue: 2, min: 0 }),\n    openInPrimaryTab: ComponentOptions.buildBooleanOption({ defaultValue: false }),\n    openInSubTab: ComponentOptions.buildBooleanOption({ defaultValue: true })\n  };\n\n  constructor(\n    public element: HTMLElement,\n    public options?: IChatterLikedByOptions,\n    public bindings?: IComponentBindings,\n    public result?: IQueryResult\n  ) {\n    super(element, ChatterLikedBy.ID, bindings);\n    this.options = ComponentOptions.initComponentOptions(element, ChatterLikedBy, options);\n\n    if (\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedby')) &&\n      !Utils.isNullOrUndefined(Utils.getFieldValue(result, 'sflikedbyid'))\n    ) {\n      let likeNames = Utils.getFieldValue(result, 'sflikedby').split(';');\n      let likeIds = Utils.getFieldValue(result, 'sflikedbyid').split(';');\n\n      let rootElement = $$('div', {\n        className: 'coveo-chatter-result-box-row'\n      });\n      $$(element).append(rootElement.el);\n\n      let thumbIcon = $$('div', {\n        className: 'coveo-sprites-common-thumbup_inactive coveo-chatter-result-box-icon'\n      });\n      rootElement.append(thumbIcon.el);\n\n      let fullListElement = $$('div', {\n        className: 'coveo-chatter-result-likes'\n      });\n      rootElement.append(fullListElement.el);\n\n      this.renderLikesList(fullListElement.el, result, likeNames, likeIds, this.options.nbLikesToRender);\n    }\n  }\n\n  private renderLikesList(element: HTMLElement, result: IQueryResult, likeNames: string[], likeIds: string[], nbLikesToRender: number) {\n    let tempElement = $$('div');\n\n    for (let i = 0; i < likeIds.length - 1 && (nbLikesToRender == 0 || i < nbLikesToRender); i++) {\n      tempElement.append(this.renderLikeLink(result, likeNames[i], likeIds[i]));\n\n      if ((nbLikesToRender == 0 || i < nbLikesToRender - 1) && i < likeIds.length - 2) {\n        tempElement.append($$('span', {}, ', ').el);\n      } else if (i < likeIds.length - 1) {\n        tempElement.append($$('span', {}, ` ${l('And').toLowerCase()} `).el);\n      }\n    }\n\n    if (nbLikesToRender == 0 || likeIds.length <= nbLikesToRender) {\n      tempElement.append(this.renderLikeLink(result, likeNames[likeIds.length - 1], likeIds[likeIds.length - 1]));\n    } else {\n      let othersCount = likeIds.length - nbLikesToRender;\n      let clickableLink = $$('a');\n      clickableLink.text(` ${l('Others', othersCount.toString(), othersCount)}`);\n      clickableLink.on('click', (e: Event) => {\n        e.preventDefault();\n        $$(element).empty();\n        this.renderLikesList(element, result, likeNames, likeIds, 0);\n      });\n      tempElement.append(clickableLink.el);\n    }\n\n    if (likeIds.length > 0) {\n      let name = $$('span');\n      name.el.innerHTML = l('LikesThis', tempElement.el.innerHTML, likeIds.length);\n      $$(element).append(name.el);\n    }\n  }\n\n  private renderLikeLink(result: IQueryResult, likeName: string, likeId: string): HTMLElement {\n    let link = $$('a', {\n      href: ChatterUtils.buildURI(result.clickUri, Utils.getFieldValue(result, 'sffeeditemid'), likeId)\n    });\n    link.text(likeName);\n    return link.el;\n  }\n}\n\nInitialization.registerAutoCreateComponent(ChatterLikedBy);\n\n\n\n// WEBPACK FOOTER //\n// ./src/ui/ChatterLikedBy/ChatterLikedBy.ts"],"sourceRoot":""}